1
00:00:00,000 --> 00:00:03,465
PIXAR IN A BOX 艾墨镇 aimozhen.com/pixarinabox

2
00:00:03,465 --> 00:00:05,346
- 在上一个视频中 我们明白了如何计算

3
00:00:05,346 --> 00:00:07,598
一个位于三角形所在平面内的

4
00:00:07,598 --> 00:00:09,386
交点

5
00:00:09,386 --> 00:00:11,882
但我们如何确定一个点是像这样

6
00:00:11,882 --> 00:00:15,470
落在三角形之内 或是像这样

7
00:00:15,470 --> 00:00:17,314
落在三角形之外呢？

8
00:00:18,314 --> 00:00:20,567
光线追踪渲染器实际上使用的是

9
00:00:20,567 --> 00:00:22,320
向量运算

10
00:00:22,320 --> 00:00:24,619
但有一种方法本质上和它一样

11
00:00:24,619 --> 00:00:27,576
而且更容易解释 那就是加权平均数

12
00:00:29,576 --> 00:00:31,293
（叮铃铃）

13
00:00:32,293 --> 00:00:34,708
注意到当我改变权重的时候

14
00:00:34,708 --> 00:00:37,831
交点 I 也跟着改变了

15
00:00:37,831 --> 00:00:40,082
如果所有的权重都是正值

16
00:00:40,082 --> 00:00:42,591
I 就在三角形内部

17
00:00:42,591 --> 00:00:43,717
但如果有一个或

18
00:00:43,717 --> 00:00:45,958
多个权重为负值时：

19
00:00:45,958 --> 00:00:48,175
I 就离开了三角形

20
00:00:48,175 --> 00:00:49,476
就是这样！

21
00:00:49,476 --> 00:00:52,471
如果我们能确定产生 I 的权重

22
00:00:52,471 --> 00:00:55,060
我们就仅用检查它们的正负即可

23
00:00:55,060 --> 00:00:57,231
如果它们中有一个或两个是负的

24
00:00:57,231 --> 00:00:59,262
I 就在三角形外部

25
00:00:59,262 --> 00:01:02,140
其他情况下 I 就在内部

26
00:01:03,140 --> 00:01:05,404
但我们如何确定权重？

27
00:01:05,404 --> 00:01:07,367
让我们先把它们当成未知数

28
00:01:07,367 --> 00:01:10,697
我们称它们为小 a、小 b 和小 c

29
00:01:11,697 --> 00:01:16,033
每个落在点大 A、大 B 和大 C 所确定的平面上的点 I

30
00:01:17,033 --> 00:01:19,084
都可以用大 A、大 B 和大 C的

31
00:01:19,084 --> 00:01:22,298
加权平均数表示

32
00:01:23,298 --> 00:01:26,921
如果我选择特定的小 a、小 b 和小 c

33
00:01:26,921 --> 00:01:28,581
使它们加起来等于 1

34
00:01:28,581 --> 00:01:30,471
我就可以忽略分母了

35
00:01:31,471 --> 00:01:33,422
得到的方程就是

36
00:01:33,422 --> 00:01:36,172
I = a*A+b*B+c*C

37
00:01:36,172 --> 00:01:38,438
I = a*A+b*B+c*C

38
00:01:38,438 --> 00:01:40,771
I = a*A+b*B+c*C

39
00:01:40,771 --> 00:01:43,441
代表了三个方程

40
00:01:43,441 --> 00:01:45,031
一个是 X 轴向的

41
00:01:45,031 --> 00:01:46,402
一个是 Y 轴向的

42
00:01:46,402 --> 00:01:48,527
一个是 Z 轴向的

43
00:01:48,527 --> 00:01:52,614
我们知道 I、大 A、大 B 和大 C

44
00:01:52,614 --> 00:01:57,117
所以未知数仅为小 a、小 b 和小 c

45
00:01:57,117 --> 00:01:59,672
所以这是三个方程和三个未知数

46
00:01:59,672 --> 00:02:02,215
我们可以解出小 a

47
00:02:02,215 --> 00:02:04,885
小 b 和小 c 的值

48
00:02:04,885 --> 00:02:07,544
一旦你知道了小 a、小 b 和小 c 的值

49
00:02:07,544 --> 00:02:10,175
检查它们的符号就知道 I 是否在三角形内部

50
00:02:12,175 --> 00:02:14,104
在最后的练习中 你将会被要求

51
00:02:14,104 --> 00:02:16,146
计算焦点 I

52
00:02:16,146 --> 00:02:19,816
并确定它们落在三角形的内部还是外部

53
00:02:19,816 --> 00:02:23,000
现在 了解了这么多之后 接着向前推进并写出你自己的光线追踪渲染器吧 aimozhen.com/pixarinabox

